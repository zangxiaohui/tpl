(function(){!function(a,b){var c,d,e,f,g,h,i;i=a.detail.Utils,c=lib.uri.getUrl,g=lib.notification,e=a.detail.message,f=lib.mtop,h=function(a){g.simple(a,2e3)},d=!1,a.extendView({name:"ActionView",el:"div.dt-action",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b]},template:function(b){var d,e,f,g,h,i,j,k,l;return a.GLOBAL_DATA=b,h=b._frmetao,j=b._itemId,l=b._ttid,g=b._ChannelKey,i=b._hybrid,k=b._qfromMore,d=c({subdomain:"h5",path:"awp/base/order.htm"}),b.v6.trade&&b.v6.trade.buyUrl&&(d=b.v6.trade.buyUrl),"https:"===location.protocol&&-1===d.indexOf("https")&&(d=d.replace("http","https")),e=function(a){var b,c,d,e,f,g;if(""===a)return{};for(d={},f=0,g=a.length;g>f;f++){e=a[f];try{e=decodeURIComponent(e)}catch(h){b=h}c=e.split("=",2),1===c.length?d[c[0]]="":d[c[0]]=c[1]}return d}(window.location.search.substr(1).split("&")),e=window.JSON?JSON.stringify(e):"",f=[],f.push('<div class="dta-iner">'),f.push(this.template1(b)),f.push('<form id="order-form" name="orderForm" style="display: none;" action="'+d+'" method="get">'),f.push('<input type="hidden" name="itemId" value="'+j+'" /2>'),f.push('<input type="hidden" name="item_num_id" value="'+j+'" />'),f.push('<input type="hidden" name="_input_charset" value="utf-8" />'),f.push('<input type="hidden" name="buyNow" value="true" />'),f.push('<input type="hidden" name="v" value="0" />'),f.push('<input type="hidden" name="quantity" value="1" />'),f.push('<input type="hidden" id="sku-id" name="skuId" value="" />'),h&&f.push('<input type="hidden" name="piggybacking" value="tag:etao;" />'),l&&f.push('<input type="hidden" name="ttid" value="'+l+'" />'),g&&f.push('<input type="hidden" name="channelKey" value="'+g+'" />'),i&&f.push('<input type="hidden" name="hybrid" value="'+i+'" />'),k&&f.push('<input type="hidden" name="'+k[0]+'" value="'+k[1]+'" />'),f.push('<input type="hidden" name="exParams" value=\''+e+"' />"),f.push("</form></div>"),f.join("")},template1:function(a){var b,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t;return l=a.v6.seller,q=a._itemId,o=a.v6.trade,g=[],n="#",l.shopId&&(n=""+c({subdomain:"shop",path:"shop/shopIndex.htm",data:{shop_id:l.shopId}})),"true"===o.cartEnable?(e=!0,f=o.cartText||"加入购物车"):f="加入购物车","true"===o.buyEnable?(b=!0,d=o.buyText||"立即购买"):(d=o.errorMessage||(null!=(r=o.hindBanner)?r.text:void 0)||"不支持购买",e=!1),p=""+c({subdomain:"h5",path:"ww/index.htm"})+"#!dialog-"+i.base64_encode(l.sellerNick)+"-"+q+"--",g.push('<div  data-spm="action"  class="item-action"><div class="active-contact"><a  data-spm="dwangwang" href="'+p+'"  ><span class="icon"></span>客服</a></div><div class="toggle-collect"><span class="icon"></span>收藏</div><div class="go-store"><a data-spm="dstore" href="'+n+'"><span class="icon"></span>店铺</a></div>'),s=[!1,!1],m=s[0],j=s[1],k="",h=!1,(null!=(t=a.v6.vertical)?t.presale:void 0)&&(this.isPrePayForSku=h=m=!0,a.v6.vertical.presale.startTime-a.v6.item.systemTime>1e3?(d="即将开始",k="prepay-coming"):a.v6.item.systemTime-a.v6.vertical.presale.endTime>10?(d="预售已结束",k="prepay-end"):k="prepay-running"),m?(e||b)&&g.push('<div class="prepay-info '+k+'">'+this.templateForPrePay(a)+"</div>"):g.push('<div id="bottom-cart-entrance" class="add-to-cart'+(e?"":" disable")+'">'+_.sec(f)+"</div>"),g.push('<div class="buy-now'+(b?"":" disable")+(h?" prepay ":"")+(" "+k+'">')+_.sec(d)+"</div></div>"),g.join("")},templateForPrePay:function(a){var b,c,d,e,f,g,h,i;if(a.v6.item.systemTime-a.v6.vertical.presale.endTime>10)return'<div class="line1"></div>   \n<div class="line2"></div>          ';h="付款后15天内",f="即将预售",(null!=(i=a.v6.vertical.presale)?i.extraText:void 0)&&(h=a.v6.vertical.presale.extraText,h=h.replace("发货",""));try{a.v6.vertical.presale.endTime&&(b=new Date(Number(a.v6.vertical.presale.endTime)),d=""+b.getHours(),d.length<2&&(d="0"+d),e=""+b.getMinutes(),e.length<2&&(e="0"+e),f=""+(b.getMonth()+1)+"."+b.getDate()+" "+d+":"+e+"结束")}catch(j){c=j}return g='<div class="line1">'+f+'</div>\n<div class="line2">'+h+"发货</div>          "},render:function(){this.el.innerHTML=this.template(this.data)},afterRender:function(){var b,f,g,j,k,l,m,n,o,p,q,r;p=this,b=a.detail.wrapper.find("#J_detail"),q=this.data.v6.trade,j="",n="","true"===q.cartEnable&&(n+='<a href="#" class="c-btn-blue dt-addcart '+(this.isPrePayForSku?" prepay ":"")+'sku-btn-addcart"><span>'+(_.sec(q.cartText)||"加入购物车")+"</span></a>"),n+="true"===q.buyEnable?'<a href="#" class="c-btn-orgn '+j+"  "+(this.isPrePayForSku?" prepay ":"")+'sku-btn-buy buy-now"><span>'+(_.sec(q.buyText)||"立即购买")+"</span></a>":'<b class="c-btn c-btn-off"><span>'+(_.sec(q.errorMessage)||"不支持购买")+"</span></b>",a.module.MessageScope.get("SkuView").trigger("change:btn",n),f=function(a){return p.addCart(a,function(){var a;a=c({subdomain:"h5",path:"cart/index.htm"}),location.href=a})},g=p.$el.find(".add-to-cart"),g.hasClass("disable")||g.click(function(a){i.sendPoint("sns.27.11"),f(a)}),k=$(document).find(".buy-now"),k.click(function(a){i.sendPoint("sns.27.12"),k.hasClass("disable")||k.hasClass("prepay-coming")||k.hasClass("prepay-end")||p.immediatelyBuy(a)}),b.on("click",".dt-addcart",function(a){f(a)}),b.on("click",".dt-immbuy",function(a){p.immediatelyBuy(a)}),o=lib.env.taobaoApp,b.on("click",".dt-mycart",function(a){var b;a.preventDefault(),i.sendPoint("mtbdetail.1.5"),b=this.href,setTimeout(function(){var a;o&&(a=b.split("?"),b=a[0]+"?setNaviBarHidden=0",a[1]&&(b+="&"+a[1])),p.data._mmusdkwakeup?window.WindVane.call("AlimamaWakeup","canWakeup",{url:"//h5.m.taobao.com/awp/base/bag.htm?"+location.search.slice(1)},function(a){},function(a){location.href=b},1e4):location.href=b},200)}),this.extraRender&&this.extraRender(),m=function(){p.favorite(function(){$(".toggle-collect .icon").addClass("selected")})},r=p.data._mmusdkwakeup,l=p.$el.find(".toggle-collect"),l.click(function(){var a,b;i.sendPoint("sns.27.9"),$(".toggle-collect .icon").hasClass("selected")||(d?h(e.repeatMessage):(d=!0,r?(b=location.search.slice(1),a=["http://alimamasdk/itemCollect?"],a.push("itemId="+p.data._itemId),a.push("&type=1"),a.push("&"+b),a=a.join(""),window.WindVane.call("AlimamaWakeup","canWakeup",{url:a},function(a){$(document).on("Collect:Success",function(){successBack()}),$(document).on("Collect:Fail",function(){m()})},function(a){m()},1e4)):m()))})},addCart:function(b,c){var d,j,k,l,m,n,o,p,q,r,s;l=function(){var a,b;if(a=function(){},q.commonDecide()){if(q.addCartXhr)return void h(e.repeatMessage);i.sendPoint("mtbdetail.1.4"),q.addCartXhr=!0,b=q.data._ttid||"",f.loginedRequest({api:"mtop.trade.addBag",data:m,ttid:b,v:"3.0"},{succ:function(){h(e.addCartSuccMsg),q.addCartXhr=!1,a()},fail:function(a){var b,d;b=a&&a.errcode||"NET_ERROR",d=a&&a.msg||"系统错误，请稍后再试","CART_OVER_MEMBER_LIMIT_50"===b?g.confirm("购物车已满是否前去清理","",function(a,b){b&&c&&c.call(null),this.hide()}).show():h("CART_ITEM_QUANTITY_LACK"===b?"库存为0，请重新选择sku":"FAIL_SYS_TRAFFIC_LIMIT"===b?"哎哟喂,被挤爆啦,请稍后重试":d),q.addCartXhr=!1}})}},b.preventDefault(),q=this,d=q.data||a.GLOBAL_DATA,s=d._mmusdkwakeup,j=this.model.data.areaId||0,r=d._itemId,o=this.model.skuId,k=$("input[name=exParams]").val(),n=Number($(".quantity-num-input .num-display").text())||1,m={itemId:r,quantity:n,skuId:o,exParams:k},q.data._frmetao&&(m.piggybacking="tag:etao;"),s?(p=["//h5.m.taobao.com/awp/core/detail.htm?"+location.search.slice(1)],p.push("itemNumId="+r),p.push("quantity=1"),p.push("skuId="+o),p.push("divisionId="+j),p=p.join("&"),window.WindVane.call("AlimamaWakeup","canWakeup",{url:p},function(a){},function(a){l()},1e4)):l()},commonDecide:function(){var b,c,d;return b=this.model,d=a.module.MessageScope.get("SkuView"),c=this.data.v6.feature.showSku,"true"!==c||b.skuId?!0:(h("请选择 "+b.skuText),location.hash="#sku",null)},goOrder:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;h=this.$el.find("#order-form");try{m=h.find("[name='tgKey']"),m&&(l=m.val(),e=h.find("[name='exParams']"),d=(e.val()?JSON.parse(e.val()):void 0)||{},l&&(d.tgKey=l),e.val(JSON.stringify(d)))}catch(r){c=r}try{i=h.serialize(),i.length>1999&&h.find("[name='exParams']").remove()}catch(r){c=r}return g=this.model,j=lib.env.os,a=lib.env.aliapp,f=!1,"true"===(null!=(o=this.data.skuModel)?o.installmentEnable:void 0)&&(f=!0),f&&"TB"===(null!=(p=lib.env.aliapp)?p.appname:void 0)&&lib.version(lib.env.aliapp.version).gt("4.5.0")?(k={url:""+h.attr("action")+h.serialize()+"&itemId="+g.id},void window.WindVane.call("Base","openWindow",k,function(a){},function(a){return window.WindVane.call("DetailBase","openWindow",k,function(a){},function(a){return location.href=k.url})})):(b=-1===(null!=(q=g.extension)?q.indexOf("coupon"):void 0),void(b?h.submit():(n=this.data._qfromNearby,j.isIOS&&a&&"TB"===a.appname&&!n?location.href="taobao://go/create_order?itemId="+g.id+"&quantity=1&"+h.serialize():h.submit())))},immediatelyBuy:function(a,b){var c,d,e;a.preventDefault(),e=this,e.commonDecide()&&(i.sendPoint("mtbdetail.1.3"),c=e.$el.find("#order-form"),e.data._mmusdkwakeup?(d="//h5.m.taobao.com/awp/base/order.htm?",d+=c.serialize(),d+="&",d+=location.search.slice(1),window.WindVane.call("AlimamaWakeup","canWakeup",{url:d},function(a){},function(a){e.goOrder()},1e4)):e.goOrder())},favorite:function(a,b){f.loginedRequest({api:"com.taobao.favorite.api.addCollect",v:"*",data:{itemId:this.model.id,type:1}},{succ:function(b){h(e.addFavSuccMsg),a&&a.call(null),d=!1},fail:function(b){var c,f;c=b.errcode,f=b.message,"timeout"===b?h(e.errorMessage):"ALREADY_COLLECT"===c?(f=e.addFavAgainMsg,h(f),a&&a.call(null)):"FAIL_SYS_SESSION_EXPIRED"===c?login.goLogin({rediUrl:location.href,hideType:!0}):h(f),d=!1}})},destroy:function(){a.detail.wrapper.find("#J_detail").off("click")}})}(app,lib)}).call(this),function(){!function(a){a.extendView({name:"BannerView",el:"div.item-banner",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b]},template:function(a){var b;return b="",a.v6.resource&&a.v6.resource.entrances&&a.v6.resource.entrances.double11Banner&&(b='<div class="up-banner">\n    <img src="'+a.v6.resource.entrances.double11Banner.icon+'" />\n</div>'),b},render:function(){return this.el.innerHTML=this.template(this.data),this},afterRender:function(){return this},destroy:function(){this.$el.off("click")}})}(app)}.call(this),function(a,b){var c=b.detail.Utils,d=b.detail.message,e=a.PageNav,f=a.mtop,g=a.notification,h=function(a){g.simple(a,2e3)};b.extendView({name:"CommentView",el:"div.dt-comt",typeMap:{good:"1",ok:"0",bad:"-1",all:""},initialize:function(a){a=a||{};for(var b in a)this[b]=a[b];var d=this;this.typeg="all",this.isFirst=!0,this.tabCache={good:{first:!0,page:1,total:0,sel:null,list:[]},ok:{first:!0,page:1,total:0,sel:null,list:[]},bad:{first:!0,page:1,total:0,sel:null,list:[]},all:{first:!0,page:1,total:0,sel:null,list:[]}},this.fetch(this.id,1,!0),this.$el.on("tap",".dtcm-hd li",function(a){d.changeTab(a)});this.imgSize=c.getPicSize(["320x320","640x640","480x480"]);this.$el.on("tap",".dtcmcl-d2 img",function(a){var b=$(this.parentNode),d=b.children().index(a.currentTarget);b.attr("imgs");c.fullscreenSlider(_.map(b.children(),function(a){return a.src}),d)})},scrollEle:function(){window.scrollTo(0,b.detail.wrapper.find("#J_detail .dtct-ul").offset().top)},fetch:function(a,b,e){var g=this;a&&(b=b||1,c.loadShow(),f.request({api:"mtop.wdetail.getItemRates",v:"2.0",data:{hasRateContent:1,hasPic:1,auctionNumId:a,pageSize:10,pageNo:b,rateType:g.typeMap[g.typeg]}},function(a){g.fetchAfter(a.data,b),c.loadHide()},function(a){var b=a.ret;if(b=b&&b.length?a.ret[0].split("::"):null,e){var f=['<div class="dt-msg"><div class="dt-state dt-msg-succ"></div><p>',b?b[1]:d.errorMessage,"</p></div>"].join("");g.$el.html(f)}else if(b&&"NO_RATES"==b[0])g.render({},1);else{var i=b?b[1]:d.errorMessage;h(i)}c.loadHide()}))},fetchAfter:function(a,b){var c,d=this,f=d.tabCache[d.typeg];d.render(a,b),d.pageNav||(c=d.pageNav=new e({id:"#J_comment_page",index:1,pageCount:a.totalPage,disableHash:!0}),c.$container.on("P:switchPage",function(a,b){d.getData(b.index),d.tabCache[d.typeg].page=b.index}),f.total=a.totalPage,f.first=null),f.first&&(f.first=null,f.total=a.totalPage,c=d.pageNav,c.eventDetach(),c.init({index:b,pageCount:a.totalPage,disableHash:!0})),d.pagebar.removeClass("none"),d.isFirst=null},getData:function(a){var b=this,c=b.typeg,d=b.tabCache[c],e=d.list,f=a||d.page;if(d.sel&&d.sel.addClass("none"),e[f]){if(e[f].removeClass("none"),d.sel=e[f],b.scrollEle(),d.first){d.first=null;var g=b.pageNav;if(!g)return;g.eventDetach(),g.init({index:f,pageCount:d.total,disableHash:!0})}}else b.pagebar.addClass("none"),b.fetch(b.id,a)},render:function(a,b){var c,d,e,f=this,g=f.tabCache[f.typeg];a.rateList&&a.rateList.length?(c=f.template(a),d=$(c),e=d.find("#J_comment_cont ul")):e=$('<p class="itc-p">无该类型评论</p>'),f.isFirst&&(f.$el.html(d),f.contbar||(f.contbar=f.$el.find("#J_comment_cont")),f.pagebar||(f.pagebar=f.$el.find("#J_comment_page")),a.items&&a.items.length||f.contbar.append(e)),g.sel&&g.sel.addClass("none"),g.list[b]=e,g.sel=e,f.isFirst||f.contbar.append(e),f.scrollEle()},template:function(b){var d=b.feedGoodCount,e=b.feedNormalCount,f=b.feedBadCount,g=b.rateList,h=[];h.push('<ul class="dtcm-hd">'),h.push('<li class="sel" s="all">全部</li>'),h.push('<li s="good">好评'+c.disposeRate(d)+"</li>"),h.push('<li s="ok">中评'+c.disposeRate(e)+"</li>"),h.push('<li s="bad">差评'+c.disposeRate(f)+"</li>"),h.push("</ul>"),h.push('<div class="dtcm-ct" id="J_comment_cont"><ul>');for(var i=0,j=g.length;j>i;i++){h.push('<li class="dtcmc-li">'),h.push('<div class="dtcmcl-d1">'),h.push('<span class="dtcmcl-s1"><img class="dtcmcl-m1" src="'+c.cmDefault(g[i].headPicUrl)+'"></span><strong>'+_.sec(g[i].userNick)+'</strong><b class="c-iconcom '+c.rank(g[i].userStar)+'"></b>'),h.push("</div>"),h.push('<p class="dtcmcl-p">'+_.sec(g[i].feedback)+"</p>");var k=g[i].feedPicPathList;if(k){h.push('<div class="dtcmcl-d2" imgs="'+i+'">');for(var l=0,m=k.length;m>l;l++){var n=new a.img({isNeedWebp:!1,sharpen:"s150",size:this.imgSize}).getNewUrl(k[l]);h.push('<img src="'+n+'">')}h.push("</div>")}h.push('<div class="dtcmcl-d3 lgray">'+_.sec(g[i].feedbackDate)+" "+_.sec(c.serObj(g[i].skuMap))+"</div>"),g[i].appendedFeed&&h.push('<p class="dtcm-ad">[追加] : '+_.sec(g[i].appendedFeed.appendedFeedback)+"</p>"),g[i].reply&&h.push('<p class="dtcm-rp">[掌柜解释] : '+_.sec(g[i].reply)+"</p>"),h.push("</li>")}return h.push("</ul></div>"),h.push('<div id="J_comment_page"></div>'),h.join("")},changeTab:function(a){a.preventDefault();var b=this,c=$(a.currentTarget);if(!c.hasClass("sel")){b.curLi||(b.curLi=c.parent().find("li.sel")),c.addClass("sel"),b.curLi.removeClass("sel"),b.curLi=c;var d=b.tabCache[b.typeg],e=d.sel;e&&e.addClass("none"),b.typeg=c.attr("s");var f=b.tabCache[b.typeg];f.total&&b.pagebar.removeClass("none")||b.pagebar.addClass("none"),f.first=!0,b.getData()}},destroy:function(){this.$el.off("tap"),this.tabCache=null;var a=this.pageNav;a&&a.eventDetach()}})}(lib,app),function(){!function(a,b){var c;c=b.detail.Utils,b.extendView({name:"CommonView",el:"div.dt-content",_duration:300,_isAnimating:!1,initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b];this.viewInstances=new Array(4)},template:function(){var a;return a=['<ul class="dtct-ul">'],a.push("<li>图文详情</li>"),a.push("<li>产品参数</li>"),a.push("<li>累计评价</li>"),a.push("<li>同店推荐</li>"),a.push("</ul>"),a.push('<div class="dtct-otr"><div class="dtct-container"></div></div>'),a.push('<div id="J_detail_commloading" class="dt-loading"><div class="ani-loading"></div></div>'),a.join("")},render:function(){this.el.innerHTML=this.template()},afterRender:function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;s=this,d=this.$contEl=s.$el.find(".dtct-container"),e=d.parent(),f=this.$el.find(".dtct-ul"),u=b.detail.wrapper,a.scrollTo(0,0),m=a.innerHeight-f.offset().height-u.find("#J_footer").height(),e.css("min-height",m),n=[" sns.27.15","sns.27.15","sns.27.15","sns.27.15"],h=void 0,q=u.find(".dtct-ul").offset().top,s.$el.on("click",".dtct-ul li",function(){var b;b=$(this).index(),h!==b&&(c.loadHide(),"undefined"!=typeof h&&a.scrollTo(0,q),s._switchTab(h,b),c.sendPoint(n[b])),h=b}),o=0,(null!=(v=b.detail.smartBannerHelper.instance)?v.status:void 0)&&(o=b.detail.smartBannerHelper.instanc.smartDom.scrollHeight,null!=(w=b.detail.stickyTab)&&(w.top=o),null!=(x=b.detail.stickyTab)&&x.refresh(),b.detail.smartBannerHelper.instance.hideCB=function(){var a,c;return null!=(a=b.detail.stickyTab)&&(a.top=0),null!=(c=b.detail.stickyTab)&&"function"==typeof c.refresh?c.refresh():void 0}),j=-1!==navigator.userAgent.indexOf("Android"),j||(b.detail.stickyTab=this.stickyTab=new lib.sticky(f.get(0),o)),i=$("#J_detail_main").get(0),p=i.scrollHeight,setInterval(function(){var a,c;return a=i.scrollHeight,a!==p?(p=a,null!=(c=b.detail.stickyTab)?c.refresh():void 0):void 0},700),r=navigator.userAgent.match(/(iPhone\sOS)\s([\d_]+)/i),k=r?!0:!1,t=r&&r.length>2?r[2].split("_"):[5],l=c.getParam().lay,g=location.hash.slice(1),t[0]<5||"fulldesc"===g?s.initEvent():l&&"description"===l?(s.initEvent(),a.scrollTo(0,q)):s.listen()},listen:function(){var b,c,d;d=this,b=$(a),c=function(){var e;e=d.$el.offset().top,1>=e||e<a.pageYOffset+a.innerHeight+100&&(d.initEvent(),b.off("scroll",c))},b.on("scroll",c),b.trigger("scroll")},initEvent:function(){this.$el.find(".dtct-ul li").eq(0).trigger("click")},_switchTab:function(b,c){var d,e,f,g,h,i,j,k,l;this._isAnimating||(this._isAnimating=!0,k=this,j="undefined"!=typeof b,f=k.$el.find(".dtct-ul li"),e=j?f.eq(b):null,h=f.eq(c),e&&e.removeClass("sel"),h.addClass("sel").css({opacity:.5}).animate({opacity:1},k._duration,"esea"),d=k.$contEl,g=k._getSubView(b,c),l=void 0,i=a.innerWidth,g&&g.addClass("visible").show(),j?(l=d.find(".visible").length,2>=l?d.css({width:"200%"}):d.css({width:100*l+"%"}),c>b?(d.css({"-webkit-transform":"translate(0)"}),d.animate({translate:-i+"px"},k._duration,"ease",function(){g.siblings()&&g.siblings().removeClass("visible").hide(),d.attr("style",""),k._isAnimating=!1,k._disX=void 0})):(d.css({"-webkit-transform":"translate(-"+i+"px)"}),d.animate({translate:0},k._duration,"ease",function(){g.siblings()&&g.siblings().removeClass("visible").hide(),d.attr("style",""),k._isAnimating=!1,k._disX=void 0}))):this._isAnimating=!1)},_getSubView:function(a,c){var d,e,f,g,h,i,j,k,l,m,n;if(m=this,d=m.$contEl,n=m.viewInstances,k=m.model.id,h=m.data,g=n[a],l=n[c],f=void 0,i=void 0,j=0,l)f=l.$el;else{switch(c){case 0:l=b.getView("ImageTxtView",{id:k,data:h});break;case 1:l=b.getView("ParamView",{data:h});break;case 2:l=b.getView("CommentView",{id:k});break;case 3:l=b.getView("RecommendView",{id:k,data:h})}if(f=l.$el,g)if(e=g.$el,c>a){for(i=c-a-1;i>j&&n[a+1];)e=n[a+1].$el,j++;f.insertAfter(e)}else{for(i=a-c-1;i>j&&n[a-1];)e=n[a-1].$el,j++;f.insertBefore(e)}else d.append(f);this.viewInstances[c]=l}return f},destroy:function(){var a,b,c;for(this.$el.off("click"),c=void 0,a=0,b=this.viewInstances.length;b>a;)c=this.viewInstances[a],c&&c.destroy&&c.destroy(),a++;this.viewInstances=null}})}(window,app)}.call(this),function(){!function(a,b){var c,d,e,f;c=a.login,f=function(){var a,b,e;return e={},a=location.href.replace(/sid=[0-9a-z]+&?/g,""),c.isLogin()?(e.isLogin=!0,e.nick=c.getUserNick(),e.nick=d(e.nick),e.myTaobaoUrl="//h5."+c.config.subDomain+".taobao.com/awp/mtb/mtb.htm#!/awp/mtb/mtb.htm",e.loginOut="//login."+c.config.subDomain+".taobao.com/logout.htm?tpl_redirect_url="+encodeURIComponent(a)):(e.isLogin=!1,e.loginUrl="//login."+c.config.subDomain+".taobao.com/login.htm?tpl_redirect_url="+encodeURIComponent(a),b="//reg.taobao.com/member/new_register.jhtml","waptest"===c.config.subDomain&&(b="//reg.daily.taobao.net/member/new_register.jhtml"),e.registerUrl=b+"?tg="+encodeURIComponent(a)),e},e=function(b,c){var d,e,f,g;return c=c||"//www.taobao.com/index.php?from=wap",g="",e="//h5.m.taobao.com/other/feedback.html",d="//m.taobao.com/channel/act/sale/tbdl1.html?&spm=a1z3i.7c.footer.ddownload",f=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),f&&(d="https://itunes.apple.com/cn/app/tao-bao-taobao-for-iphone/id387682726?mt=8"),g+='<footer class="footer c-footer "><div class="info-line">',b.isLogin?(g+='<span class="item0" ><a class="user-login" href="'+b.myTaobaoUrl+'">'+_.sec(b.nick)+"</a></span>",g+='<span class="item1" ><a id="J_footer_logout" href="'+b.loginOut+'">退出</a></span>'):(g+='<span class="item0" ><a href="'+b.loginUrl+'">登录</a></span>',g+='<span class="item1" ><a href="'+b.registerUrl+'">注册</a></span>'),g+='<span class="item2" ><a href="'+e+'">意见反馈</a></span>',g+='<span class="item3" ><a href="'+c+'">电脑版</a></span>',g+="</div>",g+='<div class="c-copyright ">&#169; 2015 浙B2-20080224 <a href="//service.taobao.com/support/helpWap.htm" id="J_service">服务中心</a></div>',a.env.taobaoApp||(g+='<div class="download-adv"> <span class="tao-icon"> </span> <span class="text">手机淘宝官方下载</span> <span class="btn"><a data-spm="ddownload"  href="'+d+'" > 去下载!</a></span>  </div>'),g+="</footer>"},d=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(g=8,a=$.trim(a),i=0,h=function(){var b,c,d;for(d=[],e=b=0,c=a.length-1;c>=0?c>=b:b>=c;e=c>=0?++b:--b)d.push({v:a[e],c:a.charCodeAt(e)});return d}(),k=function(a){return i+=a.c<=128?1:2},l=0,n=h.length;n>l;l++)b=h[l],k(b);if(g>=i)return a;for(j="",c=0,m=0,o=h.length;o>m&&(b=h[m],c+=b.c<=128?1:3,!(c>3));m++)j+=b.v;return j+="***",f=_.last(h,2),d=_.some(f,function(a){return a.c>128?!0:!1}),j+=d?a[a.length-1]:a.substring(a.length-2,a.length)},b.extendView({name:"FooterView",el:"div#J_footer",initialize:function(a){a&&$.extend(this,a)},render:function(){var a,b,c,d;a=this.id,b="//item.taobao.com/item.htm?id="+a,d=f(),c=e(d,b),this.$el.html(c),this.$el.find(".download-adv").click(function(a){$(".download-adv a").click()}),setTimeout(function(){var a,b,c,d,e;try{return e=[$(".download-adv .tao-icon")[0].getClientRects()[0].right,$(".download-adv .btn")[0].getClientRects()[0].left,$(".download-adv .text").width()],c=e[0],a=e[1],d=e[2],$(".download-adv .text").css("left",""+(c+(a-c-d)/2)+"px")}catch(f){return void(b=f)}},500)},afterRender:function(){return this.$el.attr("data-spm","footer")}})}(lib,app)}.call(this),function(){!function(a,b,c){var d,e,f,g,h;h=c.detail.Utils,f=c.detail.message,d=b.PageNav,g=b.mtop,e=function(){var a;a=c.detail.wrapper.find("#J_image_shuf"),a.appendTo(c.detail.wrapper.find("#J_detail_main").parent()),"fulldesc"===location.hash.slice(1)&&a.removeClass("none")},c.extendView({name:"ImageTxtView",el:"div.dt-imgtext",initialize:function(a){var b,d,e,f;a=a||{};for(b in a)this[b]=a[b];return e=this,e.imgSize=h.getPicSize(["450x10000","620x10000","450x10000"]),d=this.showFullDetailDesc=(null!=(f=this.data.descInfo)?f.showFullDetailDesc:void 0)||1,3===Number(d)?(this.$el.html('<div class="dt-msg"><div class="dt-state dt-msg-error"></div><p>服务器繁忙</p></div>'),void c.detail.wrapper.children().first().append('<div id="J_image_shuf" class="dtit-full dt-msg"><div class="dt-state dt-msg-error"></div><p>访问出错</p></div>')):(this.imgReg=/\.(alicdn|taobaocdn)\./,this.pageSize=6,this.isClassFirst=!0,this.isImagesFirst=!0,this.cacheImages=[],this.isPageFirst=!0,this.cachePages=[],this.fetch(this.id),this.$el.on("click",".dt-pcfull",function(a){a.preventDefault(),location.hash="#fulldesc",h.sendPoint("click_itemdetail_pcdetail")}),c.module.MessageScope.get("ImageTxtView").on("itv:left",function(){h.pageTransition({parent:"#J_detail_main",cur:"#J_image_shuf",obj:e,title:"图文完整版",ptitle:"商品详情"})}),void c.detail.wrapper.find("#J_detail").on("tap",".dtit-dt img",function(a){h.fullscreenSlider([h.getWebpImg(this.src)]),h.sendPoint("Page_Detail_Button-itemDetai_BigPic")}))},succImage:function(a){var b,e;e=this,a&&a.images&&a.images.length?(e.list=a.pages,e.images=a.images,e._render(),e.pageNav||(b=e.pageNav=new d({id:"#J_image_page",index:1,pageCount:Math.ceil(a.images.length/e.pageSize),disableHash:!0}),b.$container.on("P:switchPage",function(a,b){window.scrollTo(0,c.detail.wrapper.find(".dtct-ul").offset().top),e._render(b.index),"next"===b.type&&h.sendPoint("click_itemdetail_detailnextpage")}))):(e.cacheImages=['<div style="height:50px;"></div>'],e._render())},succPage:function(a,b){var e,f;f=this,a&&a.pages&&a.pages.length?(f.list=a.pages,f._renderPage(),f.pageNavTxt||(e=f.pageNavTxt=new d({id:"#J_image_shuf_page",index:1,pageCount:a.pages.length,disableHash:!0}),e.$container.on("P:switchPage",function(a,d){f._renderPage(d.index),window.scrollTo(0,b?c.detail.wrapper.find(".dtct-ul").offset().top:0),"next"===d.type&&h.sendPoint("click_itemdetail_detailnextpage")}))):(f.cachePages=['<div class="dt-msg"><div class="dt-state dt-msg-succ"></div><p>无内容</p></div>'],f._renderPage())},fetch:function(b){var c,d,e,i,j;i=this,e=i.showFullDetailDesc,d=function(){g.request({api:"mtop.wdetail.getItemDescx",v:"4.1",data:{item_num_id:b}},function(a){var b;b=a.data,2===Number(e)?i.succPage.call(i,b,1):1===Number(e)&&(i.succImage.call(i,b),i.succPage.call(i,b)),h.loadHide()},function(a){i.$el.html('<div class="dt-msg"><div class="dt-state dt-msg-error"></div><p>'+_.sec(f.errorMessage)+"</p></div>"),h.loadHide()})},h.loadShow(),c=null!=(j=i.data.descInfo)?j.briefDescUrl:void 0,c?a.ajax({url:c,success:function(a){var b;b=a.data,2===Number(e)?i.succPage.call(i,b,1):1===Number(e)&&(i.succImage.call(i,b),i.succPage.call(i,b)),h.loadHide()},error:function(a,b){b&&"abort"===b?d():(i.$el.html('<div class="dt-msg"><div class="dt-state dt-msg-error"></div><p>'+_.sec(f.errorMessage)+"</p></div>"),h.loadHide())}}):d()},disposeImage:function(a){var c,d,e,f,g,h,i,j,k;for(i=this.pageSize,g=a-1,j=g*i,c=a*i,f=this.images,k=f.length,c=c>k?k:c,d=[],e=j;c>e;)h=new b.img({isNeedWebp:!1,size:this.imgSize,sharpen:"s150"}).getNewUrl(f[e]),d.push("<img src="+(null!==f[e].match(this.imgReg)?h:f[e])+">"),e++;return d=d.join("")},disposePage:function(a){var b;return a-=1,b=this._format(this.list[a])},_render:function(a){var b,d;a=a||1,d=this,b=void 0,d.cacheImages[a-1]?b=d.cacheImages[a-1]:(b=d.disposeImage(a),d.cacheImages[a-1]=b),d.isImagesFirst&&(d.$el.html(d._template(d.data)),d.contbar||(d.contbar=c.detail.wrapper.find("#J_image_imgs")),d.isImagesFirst=null),d.isImagesFirst||d.contbar.html(b),d.isClassFirst&&(d.isClassFirst=null,e())},_renderPage:function(a){var b,d;a=a||1,d=this,b=void 0,d.cachePages[a-1]?b=d.cachePages[a-1]:(b=d.disposePage(a),d.cachePages[a-1]=b),d.isPageFirst&&(""===d.$el.html()&&d.$el.html(d._template(d.data)),d.contbarpage||(d.contbarpage=c.detail.wrapper.find("#J_image_shuf_cont")),d.isPageFirst=null),d.isPageFirst||d.contbarpage.html(b),d.isClassFirst&&(d.isClassFirst=null,e())},_format:function(a){var b,c,d;return d=this,c=d.imgSize,b=a.replace(/<txt>/g,"<br>").replace(/<\/txt>/g,""),b=b.replace(/<img>.+?<\/img>/g,function(a){var b;return b=a.substring(5,a.length-6),'<a data-open="'+b+'"><img src="'+h.getWebpImg(b,null!==b.match(d.imgReg)?c:null)+'"></a>'})},_template:function(a){var b,c;return c=this.showFullDetailDesc,b=[],1===Number(c)?(b.push('<div id="J_image_imgs" class="dtit-dt"></div>'),b.push('<div id="J_image_page"></div>'),b.push('<div class="dtit-pc"><a class="c-btn c-btn-40 dt-pcfull" href="#"><span>查看图文完整版</span></a></div>'),b.push('<div id="J_image_shuf" class="dtit-full none"><div id="J_image_shuf_cont" class="dtit-dt"></div><div id="J_image_shuf_page"></div></div>')):2===Number(c)&&b.push('<div id="J_image_shuf_cont" class="dtit-dt"></div><div id="J_image_shuf_page"></div><div id="J_image_shuf" class="dtit-full dt-msg none"><div class="dt-state dt-msg-error"></div><p>访问出错</p></div>'),b.join("")},destroy:function(){var a,b;this.$el.off("click"),c.detail.wrapper.find("#J_detail").off("tap"),a=this.pageNav,b=this.pageNavTxt,a&&a.eventDetach(),b&&b.eventDetach()}})}($,lib,app)}.call(this),function(){!function(a){var b,c,d,e,f,g,h,i,j,k;k=a.detail.Utils,d=k.getParam(),b=a.module.MessageScope,c=[],g=function(a){var b,c;return a&&a.title?(c=a.title,c=$.trim(c),b='<div class="guarantee-item">\n    <span class="img"></span>            \n    <span class="text">'+_.sec(c)+"</span>\n</div>"):""},f=function(a){var b,d,e,f,h;return!(null!=(f=a.v6.consumerProtection)?f.items:void 0)||(null!=(h=a.v6.consumerProtection)?h.items.length:void 0)<1?"":(b=a.v6.consumerProtection.items,c=b||[],e=_.map(b,g),d='<div class="guarantee">',_.each(e,function(a){return d+=a}),d+='<div class="clear"></div></div>')},h=function(a){var b;return b='  <div class="item">\n    <span class="img"></span>'+_.sec(a)+"\n  </div>\n"},i=function(a){var b,c,d,e;return!(null!=(e=a.v6.price)?e.shopProm:void 0)||a.v6.price.shopProm.length<1?"":(c=a.v6.price.shopProm,c=_.reduce(c,function(a,b){return _.union(a,b.content)},[]),b=_.map(c,h),d='<div class="shop-promotion">',_.each(b,function(a){return d+=a}),d+="</div>")},j=function(a){var b;return b='<div class="stages-pay">\n  <div class="item">\n    <span class="img"></span>分期: 500X3期,0手续费..\n  </div>\n</div>'},e=function(a){var b;return"true"===a.v6.feature.hasCoupon&&a.v6.item.couponUrl?(b=[],b.push('<hr/>\n<div class="batch-promotion"  data-url="'+a.v6.item.couponUrl+'">\n\n <div class="icon">\n   <img alt="promotion" src="//gw.alicdn.com/tfscom/get/TB12juvFVXXXXXRapXXXXXXXXXX.png" />\n </div>\n  <p class="text">\n    领取优惠券\n  </p>\n  <div class="arrow">\n   <b class="aw a-r"></b>\n  </div>\n</div>'),b.join("")):""},a.extendView({name:"ItemExtendView",el:"div.dt-extend",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b]},template:function(a){var b,c;return b=[],b.push('<div id="item-extend-info" >\n  <div class="arrow">\n    <b class="aw a-r"></b>    \n  </div>\n  '+f(a)+"\n  "+i(a)+"\n</div>  "),b.push(""+e(a)),c=b.join("")},templateFullwidthPromotion:function(a){var b,c,d;return b="",c=a.v6.resource.bigPromotion,c&&c.bgPicUrl&&c.picUrl&&c.memo&&c.memo[0]&&(c.url=c.url||"",b='<div class="fullwidth-promotion" data-url="'+c.bgPicUrl+'">\n<div class="icon">\n<img alt="promotion" src="'+c.picUrl+'" />\n</div>\n<p class="text">\n   '+(null!=(d=c.memo)?d[0].text:void 0)+"\n</p>\n</div>"),b},template4BatchPromotion:function(a){var b,c,d,e,f,g;return d="",e=a.v6.resource,e.entrances&&e.entrances.double11Coupon&&(g=e.entrances.double11Coupon.link||"",c=e.entrances.double11Coupon.icon||"//gw.alicdn.com/tps/TB1oHX4KXXXXXaGXpXXXXXXXXXX-72-36.png",f=e.entrances.double11Coupon.text,b="",d='<hr/>\n<div class="batch-promotion'+b+'"  data-url="'+g+'">\n\n <div class="icon">\n   <img alt="promotion" src="'+c+'" />\n </div>\n  <p class="text">\n    '+f+'\n  </p>\n  <div class="ruler">\n   看规则\n  </div>\n  <div class="arrow">\n   <b class="aw a-r"></b>\n  </div>\n</div>'),d},render:function(){return this.el.innerHTML=this.templateFullwidthPromotion(this.data)+this.template(this.data)+this.template4BatchPromotion(this.data),this},afterRender:function(){var a,b,d;return((null!=(a=this.data.shopPromotion)&&null!=(b=a.descriptions)?b.length:void 0)>1||c.length>3)&&(this.$el.find("#item-extend-info").addClass("ellipsis"),this.$el.find("#item-extend-info").click(function(a){return function(b){return a.$el.find("#item-extend-info").removeClass("ellipsis")}}(this))),$(".batch-promotion").length>0&&$(".batch-promotion").data("url").length>0&&$(".batch-promotion").click(function(a){return function(a){var b,c;return b=null!=(c=$(".batch-promotion"))?c.data("url"):void 0,window.location=b}}(this)),$(".batch-promotion .text").length>0&&$(".batch-promotion .ruler").length>0&&$(".batch-promotion .text")[0].getClientRects().length>0&&$(".batch-promotion .ruler")[0].getClientRects().length>0&&$(".batch-promotion .text")[0].getClientRects()[0].right>=$(".batch-promotion .ruler")[0].getClientRects()[0].left&&($(".batch-promotion").addClass("narrow"),$(".batch-promotion .text").css("width",""+($(window).width()-150)+"px")),$(".fullwidth-promotion").length>0&&$(".fullwidth-promotion").data("url").length>0&&$(".fullwidth-promotion").click(function(a){return function(a){var b,c;return b=null!=(c=$(".fullwidth-promotion"))?c.data("url"):void 0,window.location=b}}(this)),$(".fullwidth-promotion").length>0&&(null!=(d=$(".fullwidth-promotion .text"))?d.text().trim().length:void 0)>16&&$(".fullwidth-promotion").addClass("double-text-line"),this},destroy:function(){
this.$el.off("click")}})}(app)}.call(this),function(){!function(a){var b,c,d,e,f,g;return d=function(a){var b,c,d,e;if(!a)return"";for(c=[],d=0,e=a.length;e>d;)b=a[d],b.text&&(b.bgColor?(c.push('<span class="dt-icon"'),c.push('style="background-color:'+b.bgColor+';"'),c.push(">"),c.push(b.text),c.push("</span>")):(c.push('<span class="dt-icon" >'),c.push(b.text),c.push("</span>"))),b.logo&&c.push('<img class="dt-icon-img" src="'+b.logo+'" />'),d++;return c.join("")},c=function(a){var b,c,d,e;if(!a)return"";for(c=[],d=0,e=a.length;e>d;)b=a[d],b.icon&&c.push('<img class="dt-icon-img" src="'+b.icon+'" />'),d++;return c.join("")},b=function(a){var b;return b=a.replace(/\.(\d+)/g,function(a,b){return".<span class='lp'>"+b+"</span>"})},g=a.detail.Utils,f=g.getParam(),e=a.module.MessageScope,a.extendView({name:"ItemInfoView",el:"div.dt-info",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b]},template:function(a){var b,c,d,e,f,g,h,i,j,k;return d=a.v6.item,c=[],c.push('<h1 class="dtif-h">'+_.sec(d.title)+"</h1><ul>"),c.push('<li class="dtif-p1">'),c.push(this.template1(a)),(2===(null!=(h=a.taobaoPreSaleInfo)?h.type:void 0)||"2"===(null!=(i=a.taobaoPreSaleInfo)?i.type:void 0))&&(a.taobaoPreSaleInfo.payStartTimeMillis-a.taobaoPreSaleInfo.systemTimeMillis>1e3?(f=a.taobaoPreSaleInfo.payEnd.split(" ")[0],c.push('<li class="dtif-prepay_info lgray">目标:&nbsp;  '+f+"前,征集到"+a.taobaoPreSaleInfo.solicitationNum+"件成团</li>        ")):c.push('<li class="dtif-prepay_info lgray">进度: 已完成'+(a.taobaoPreSaleInfo.currentSolicitationNum||0)+"件  [目标"+a.taobaoPreSaleInfo.solicitationNum+"件]</li>")),b=a.v6.delivery,c.push('<li class="dtif-p2 lgray">'),c.push('<span class="dtifp-l">'),(null!=b?b.postage:void 0)&&c.push(b.postage),c.push('</span><span class="dtifp-m">'),g=null!=(j=a.v6.item)?j.sellCount:void 0,g&&c.push("月售"+g+"笔"),c.push("</span>"),e=null!=(k=a.v6.delivery)?k.from:void 0,e&&c.push('<span class="dtifp-r">'+_.sec(e)+"</span></li>"),c.push("</ul>"),c.join("")},template1:function(a){var e,f,g,h,i,j,k,l,m,n;if(f=a.v6.item,j=a.v6.price,e=[],j){if(j.price&&(h=j.price,e.push('<p id="item-price-line">'),h.priceTitle?e.push('<ins class="orange pre-pay-price"><label class="pre-pay-name">'+h.priceTitle+"</label>&yen;"+b(h.priceText)):e.push('<ins class="orange">&yen;'+b(h.priceText)),j.subPrice&&e.push('<ins class="pre-origin-price"> <label class="price-name">'+j.subPrice.priceTitle+"</label> &yen;"+b(j.subPrice.priceText)),j.add&&e.push('<span class="font12">'+j.add+"</span>"),e.push("</ins>"),j.priceTag&&e.push("<span class='pre-price-tips'>"+d(j.priceTag)+"</span>"),j.priceTag&&c(j.priceTag)&&e.push("<span class='pre-price-tips'>"+c(j.priceTag)+"</span>"),h.name&&(e.push('<span class="dt-icon"'),e.push(">"+h.name+"</span>"))),e.push("</p>"),(null!=(m=j.extraPrices)?m.length:void 0)>0)for(i=function(a){var b;return b="",b="2"===a.type?'<p><span class="lgray dtif-ps1">'+a.priceTitle+":<del>&yen;"+a.priceText+"</del></span></p>":'<p><span class="lgray dtif-ps1">'+a.priceTitle+":&yen;"+a.priceText+"</span></p>"},n=j.extraPrices,k=0,l=n.length;l>k;k++)g=n[k],e.push(i(g));a.v6.vertical&&a.v6.vertical.presale&&a.v6.vertical.presale.tip&&e.push('<span class="dt-pretip">'+a.v6.vertical.presale.tip+"</span>"),a.v6.delivery&&a.v6.delivery.extras&&a.v6.delivery.extras.PostTime&&e.push('<span class="dt-pretip">'+a.v6.delivery.extras.PostTime.text+"</span>")}return e.join("")},render:function(){return this.el.innerHTML=this.template(this.data)},afterRender:function(){var a,c,d,f,g,h,i,j,k;if(i=this.$el.find("#item-price-line >ins"),i.length>0)try{i=i[i.length-1],j=i.getClientRects()[0],h=_.last(this.$el.find("#item-price-line").children()).getClientRects()[0]}catch(l){a=l,"function"==typeof console.warn}return this.$el.attr("data-spm","info"),this.$el.on("click",".dtif-p3",function(){return location.hash="#services"}),k=this.$el.find(".dtif-p1"),f=k.find(".orange"),g=f.length&&f.html(),c=k.find(".lgray del"),d=c.length&&c.html(),e.get("ItemInfoView").on("change:price",function(a,e){var h,i;return f.length>0&&(i=b(a||g),f.html(i)),c.length>0?(h=b(e||d),c.html(h)):void 0}),e.get("ItemInfoView").on("change:preprice",function(a,b){return k.find(".pre-origin-price").html(a),k.find(".pre-pay-price").html(b)}),this.extraRender&&this.extraRender()},destroy:function(){return this.$el.off("click"),e.get("ItemInfoView").off("change:price")}})}(app)}.call(this),function(){!function(a){var b,c,d,e,f;f=a.detail.Utils,d=f.getParam(),c=a.module.MessageScope,e=function(a){var b;return b='<div class="arrow">\n  <b class="aw a-r"></b>    \n</div>\n<div class="point">\n  <span class="icon"></span>\n  <span class="name">四季青新时代</span>\n  <span class="distance lgray">(16KM)</span>        \n</div>\n<div class="address lgray">\n  浙江省,杭州市,西湖区,航海路..........\n</div>\n\n<div class="entrance">\n  查看全部<span class="store-num">20</span>家门店\n</div>'},b=function(a){var b;return b={api:"mtop.place.wap.poi.get",v:"1.0",data:'{"itemNumId":'+a+',"etcyy":"false"}'},lib.mtop.request(b,function(a){return function(a,b){var c,d,e;if(0===(null!=a&&null!=(d=a.ret)&&null!=(e=d[0])?e.indexOf("SUCCESS"):void 0))return c=a.data.model,$("div.dt-lbs .name").text(c.name),$("div.dt-lbs .address").text(c.address),$("div.dt-lbs .store-num").text(c.total),$("div.dt-lbs a.map-list-entrance").attr("href",""+c.listUrl+"&showNav=true"),$("div.dt-lbs").show()}}(this))},a.extendView({name:"LBSView",el:"div.dt-lbs",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b]},template:function(a){var b,c;return b=[],b.push(""+e(a)),c=b.join(""),c='<a class="wrapper map-list-entrance" href="//m.taobao.com">\n'+c+"\n</a>"},template1:function(a){return""},render:function(){return this.el.innerHTML=this.template(this.data),this},afterRender:function(){return this.data.v6.weappData&&this.data.v6.weappData.wapO2O01?b(this.id):void 0},destroy:function(){this.$el.off("click")}})}(app)}.call(this),function(a){a.extendView({name:"ParamView",el:"div.dt-param",initialize:function(a){a=a||{};for(var b in a)this[b]=a[b];var c=this.template(this.data);this.$el.html(c)},template:function(a){if(!(a.v6.props.groupProps.length<1)){var b=_.values(a.v6.props.groupProps[0])[0];if(htmlarr=[],b&&b.length>0){htmlarr.push('<ul class="dtp-ul">');for(var c=0;c<b.length;c++)htmlarr.push("<li><label>"+_.sec(_.keys(b[c])[0])+"</label>"),htmlarr.push('<span class="omit">'+_.sec(_.values(b[c])[0])+"</span></li>");htmlarr.push("</ul>")}else htmlarr.push('<div class="dt-msg"><div class="dt-state dt-msg-succ"></div><p>暂无内容</p></div>');return htmlarr.join("")}}})}(app),function(){!function(a,b){var c,d,e,f;e=a.mtop,d=b.detail.message,c=a.uri.getUrl,f=b.detail.Utils,b.extendView({name:"RecommendView",el:"div.dt-recommend",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b];this.fetch()},fetch:function(){var a,b,c;c=this,a=c.id,b=c.data.v6.seller.userId,f.loadShow(),e.request({api:"mtop.shop.getWapRelatedItems",v:"1.0",data:{itemId:a,sellerId:b}},function(a){a.data&&a.data.itemList&&a.data.itemList.length?(c.render(a.data),f.loadHide()):c.fetchShopNew()},function(){c.fetchShopNew()})},fetchShopNew:function(){var a,b;b=this,a=b.data.v6.seller.userId,e.request({api:"com.taobao.search.api.getShopItemList",v:"1.0",data:{uid:a,sort:"oldstarts",pageSize:8}},function(a){var c;c=a.data,c&&c.itemsArray&&c.itemsArray.length?(c.itemList=c.itemsArray,b.render(c)):b.$el.html('<div class="dt-msg"><div class="dt-state dt-msg-succ"></div><p>无推荐宝贝</p></div>'),f.loadHide()},function(){b.$el.html('<div class="dt-msg"><div class="dt-state dt-msg-error"></div><p>'+_.sec(d.errorMessage)+"</div>"),f.loadHide()})},render:function(a){var b;b=f.getPicSize(["145x145xz","270x270xz","200x200xz"]),this.el.innerHTML=this.template(a,b)},template:function(b,d){var e,f,g,h;for(g=b.itemList,e=['<ul class="dtrd-ul">'],f=0,h=g.length;h>f;)e.push("<li>"),e.push('<a href="'+c({subdomain:"h5",path:"awp/core/detail.htm",data:{id:g[f].auctionId||g[f].itemId,scm:g[f].scm}})+'" class="dtrdu-a">'),e.push('<span class="dtrdua-g"><img src="'+new a.img({isNeedWebp:!1,size:d,sharpen:"s150"}).getNewUrl(g[f].picUrl)+'"></span>'),e.push("<strong>"+_.sec(g[f].title)+"</strong>"),e.push('<span class="dtrdua-s1"><ins class="orange">&yen;'+_.sec(g[f].salePrice)+'</ins><del class="lgray">&yen;'+_.sec(g[f].reservePrice)+"</del></span>"),e.push('<span class="lgray">月售'+_.sec(g[f].sold)+"笔</span>"),e.push("</a></li>"),f++;return e.push("</ul>"),e.join("")}})}(lib,app)}.call(this),function(){!function(a,b){var c,d,e;e=b.detail.Utils,c=a.uri.getUrl,d=a.login,b.extendView({name:"SellerView",el:"div.dt-shop",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b]},template:function(b){var d,f,g,h,i;return f=b.v6.seller,i=b.v6.item.itemId,d=[],d.push('<ul class="dtsp-ul">'),d.push('<li class="dtspu-l"><img src="'+new a.img({isNeedWebp:!1,sharpen:"s150"}).getNewUrl(f.shopIcon)+'" /></li>'),d.push('<li class="dtspu-r"><h2 class="omit">'+_.sec(f.shopName||f.nick)+"</h2>"),d.push('<p><span class="lgray">好评率</span><strong class="orange">'+_.sec(f.goodRatePercentage)+"</strong>"),d.push('<span class="lgray">信用</span><b class="c-iconcom '+_.sec(e.convertCredit(f.creditLevel))+'"></b></p>'),d.push('</li></ul><p class="dtsp-p">'),g=f.shopId,h=g&&"0"!==g?"//shop.m.taobao.com/goods/index.htm?shop_id="+g:"#",d.push('<a data-spm="dcategory"  class="category-entrance c-btn" href="'+h+'">\n  <span class="category-entrance-icon">查看宝贝分类</span>\n</a>'),g&&"0"!==g?g&&d.push('<a data-spm="dentrance" href="'+c({subdomain:"shop",path:"shop/shopIndex.htm",data:{shop_id:f.shopId}})+'" class="c-btn dt-splink shop-entrance"><span  class="shop-entrance-icon" >进入店铺</span></a>'):d.push('<b class="c-btn c-btn-off shop-entrance"><span class="shop-entrance-icon">查看店铺</span></b>'),d.join("</p>"),d.join("")},render:function(){this.el.innerHTML=this.template(this.data)},afterRender:function(){var a;a=this.data,this.$el.attr("data-spm","shop"),this.$el.on("click",".dt-wwlink",function(a){var b;a.preventDefault(),e.sendPoint("mtbdetail.1.8"),b=this.href,setTimeout(function(){location.href=b},200)}),this.$el.on("click",".dt-splink",function(b){var c;b.preventDefault(),e.sendPoint("mtbdetail.1.7"),c=this.href,a._mmusdkwakeup?window.WindVane.call("AlimamaWakeup","canWakeup",{url:"//shop.m.taobao.com/shop/shop_index.htm?shop_id="+a.v6.seller.shopId+"&"+location.search.slice(1)},function(a){},function(a){location.href=c},1e4):location.href=c})},destroy:function(){this.$el.off("click")}})}(lib,app)}.call(this),function(a){var b=a.detail.Utils;a.extendView({name:"ServiceView",el:"div.dse-cont",initialize:function(a){a&&$.extend(this,a),this.imgSize=b.getPicSize(["320x320","640x640","480x480"]),this.isFirst=!0},template:function(a){var c=a.delivery,d=a.itemInfoModel,e=a.guaranteeInfo,f=e?e.guarantees:a.guarantees,g=a.shopPromotion,h=['<ul class="dsec-ul">'];if(c){var i=c.deliveryFees;if(i&&i.length>1){h.push('<li class="descu-ht bt">'),2==i.length&&h.push('<span class="descu-cf">物流费用</span>');for(var j,k=0;k<i.length;k++)j=i[k].split(" "),h.push("<span><b>"+_.sec(j[0])+"</b><em>"+_.sec(j[1]||"")+"</em></span>");h.push("</li>")}}if(h.push('<li class="descu-ht bt"><span><b>库存</b><em>'+_.sec(b.disposeNum(d.quantity||0).num)+'<i class="dse-fs20">'+_.sec(b.disposeNum(d.quantity||0).isUnit)+"</i></em></span>"),h.push("<span><b>收藏人气</b><em>"+_.sec(d.favcount)+"</em></span>"),h.push('<span><b>宝贝类型</b><em class="dse-fs20">'+_.sec(d.stuffStatus)+"</em></span></li>"),f&&f.length){h.push('<li class="descu-sv bt">');for(var k=0;k<f.length;k++)f[k].icon&&(h.push('<span><img src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAB2GAAAdhgFdohOBAAAAAWJLR0QMgbNRYwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMS0wNFQxNDo0NTo1NiswODowMLKGfwEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTUtMTEtMDRUMTQ6NDU6NTYrMDg6MDDD28e9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1hJREFUeF7t3NtOI0cUQFFzh///T79yh+hMbAlZM3EnbbCytZZUos2LedgqHburudhut58biLjc/YQEQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJqUi+12+7m75ojn5+fd1c+6u7vbXXGMoBeYkF9eXjbv7++73/ysq6urze3trbAXMHIs8PHxsXl7e9t8fn6eZc17z9/AcYImRdCkmKEXeHx83Dw9Pe1e/e3m5mZzefk9+8Hvxoz7+/vNw8PD7hV/IugFDoO+uLj4Fdh3BT3m/b5+CBX0MkYOUgRNiqBJETQpgiZF0Ge2vxvIaQj6jOZruTknMl/RzVkRYa8n6DOamycT9dxAeX19dV7jBAR9Roc7sh16PUGfwOyyMzLM2p/KW+L6+vrXXccxR0RnsY6gV5qAZw6ekWHWfiae62NhT9BzS3vWnHXex81/J+iVJtrDcGcWnt164j72UMCcB5mdWcynIehvtP8WY8luzWkI+ptNyPvdesKeyPffbBwu0a8n6B+y/+A48/Wf1rHxhOMEfSb72ftwsY6gV5oPc6dcrOOJlQX+6YmVU+6sX6M+HEE8sbKMHXqlCXDCPsWyQ69nh17AQ7L/H4Je4HdB/zRBL2PkIEXQpBg5Fvh6l+8c5qzHzOz+WeNxgv4XJuxzEPJygibFDE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE3IZvMXqxGr0N3ixFsAAAAASUVORK5CYII=" realsrc="'+new lib.img({isNeedWebp:!1,sharpen:"s150"}).getNewUrl(f[k].icon)+'" />'),"信用支付"!=f[k].title&&h.push(_.sec(f[k].title)),h.push("</span>"));h.push("</li>")}return h.push("</ul>"),g&&g.descriptions&&(h.push('<div class="dsec-promo bt">'),h.push("<h3>"+_.sec(g.title)+"</h3>"),g.descriptions=_.map(g.descriptions,_.sec),h.push('<p class="dsecp-p">'+g.descriptions.join("<br>")+"</p></div>")),h.join("")},render:function(){this.$el.addClass("none").attr("id","J_detail_services"),this.el.innerHTML=this.template(this.data)},afterRender:function(){var b=this;a.module.MessageScope.get("ServiceView").on("op:ani",function(){b.showCont()})},showCont:function(){var a=this;this.isFirst&&(this.isFirst=null,this.$el.find("img").each(function(a,b){var c=b.getAttribute("realsrc");c&&(b.src=c,b.removeAttribute("realsrc"))})),b.pageTransition({parent:"#J_detail_main",cur:"#J_detail_services",obj:a,title:'<span class="dt-thide">更多服务、优惠、活动信息</span>',ptitle:"商品详情"})},destroy:function(){a.module.MessageScope.get("ServiceView").off("op:ani")}})}(app),function(){!function(a,b,c){var d,e;e=c.detail.Utils,d=c.module.MessageScope,c.extendView({name:"SkuView",el:"div.dt-pro",initialize:function(a){var c,d,f,g,h,i,j,k,l,m;a=a||{};for(d in a)this[d]=a[d];c=this.data,this.skuProps=(null!=(f=c.v6.skuBase)?f.props:void 0)||[],(null!=(g=c.v6.skuBase)?g.skus:void 0)&&c.v6.skuBase.skus.length>0?this.ppathIdmap=b.reduce(c.v6.skuBase.skus,function(a,b){return a[b.propPath]=b.skuId,a},{}):this.ppathIdmap={},this.skus=(null!=(h=c.v6.skuCore)?h.sku2info:void 0)||{},(null!=(i=c.v6.skuBase)?i.props:void 0)&&c.v6.skuBase.props.length>0?this.propNames=b.reduce(c.v6.skuBase.props,function(a,b){return a.push(b.name),a},[]):this.propNames=[],this.installment=null,((null!=(j=c.v6.skuVertical)&&null!=(k=j.installment)?k.enable:void 0)===!0||"true"===(null!=(l=c.v6.skuVertical)&&null!=(m=l.installment)?m.enable:void 0))&&(this.installment=c.v6.skuVertical.installment),this.model.skuText=this.propNames.join(","),this.bigImgSize=e.getPicSize(["320x320","640x640","480x480"])},template:function(a){var c,d,e,f,g,h,i,j;for(e=a.v6.item,c=['<div class="dt-sku">'],c.push('<p class="omit">请选择'+this.propNames.join("、")+'</p><b class="aw a-r"></b>'),c.push("</div>"),c.push('<div id="J_detail_skum" class="dgs-cont none">'),c.push('<ul class="bt dgsc-ul">'),c.push('<li class="dgscu-l"><img src="'+new lib.img({isNeedWebp:!1,size:this.bigImgSize,sharpen:"s150"}).getNewUrl(e.images[0])+'"></li>'),c.push('<li class="dgscu-r">'),c.push('<h2 class="omit">'+b.sec(e.title)+"</h2>"),c.push('<div id="J_detail_skupr">'),c.push('<ins class="orange">&yen;'),c.push(null!=(j=a.v6.price.price)?j.priceText:void 0),c.push("</ins>"),c.push('</div><span class="lgray"></span>'),c.push("</li></ul>"),c.push('<div class="dgsc-pr">'),d=0,i=this.skuProps,g=i.length;g>d;){for(c.push('<div class="dgscp-c">'),c.push('<h3 class="bt">'+b.sec(i[d].name)+"</h3>"),c.push('<p class="dgsc-pc">'),f=0,h=i[d].values.length;h>f;)c.push("<i"),i[d].values[f].image&&c.push(' data-img="'+i[d].values[f].image+'"'),i[d].values[f].vid&&c.push(' data-id="'+i[d].pid+":"+i[d].values[f].vid+'"'),c.push(">"+b.sec(i[d].values[f].name)+"</i>"),f++;c.push("</p></div>"),d++}return c.push("</div>"),c.push('<div class="dgsc-pr quantity-num-input">\n  <div class="title">购买数量</div>\n    <div class="select">\n      <div class="sign-decrease">-</div><div class="num-display" >1</div><div class="sign-plus">+</div>\n    </div>\n</div>\n<div style="clear:both"></div>        '),c.push('<div class="installment dgsc-pr">\n  <div class="info">\n    <span class="title">分期购(可选)</span>\n  </div>\n  <div class="container">\n    <div class="slider-outer">        \n      <ul class="wrap">\n        <!--\n        <li>\n          <div class="item" >\n            <div class="line1">分3期 (0手续费) </div>\n            <div class="line2">¥73.22期</div>\n          </div>\n        </li>\n         -->\n      </ul>\n    </div>\n  </div>\n  </div>'),c.push('<div class="dgsc-ft"></div>'),c.push("</div>"),c.join("")},render:function(){var a;a=this.data,this.el.innerHTML=this.template(this.data)},afterRender:function(){var f,g,h,i,j,k,l,m;this.installment?a(".installment .container").hide():a(".installment").hide(),a(".quantity-num-input .sign-decrease").click(function(b){var c,d,e,f,g,h;if(c=Number(a(".quantity-num-input .num-display").text()),c-=1,!(1>c)){for(a(".quantity-num-input .num-display").text(c),a("#order-form [name='quantity']").val(c),g=a(".installment .step-cost"),h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d.innerText=(Number(d.dataset.preStepCost)*c).toFixed(2));return h}}),a(".quantity-num-input .sign-plus").click(function(c){return function(d){var e,f,g,h,i,j,k,l;if(!c.model.skuId&&b.keys(c.skus).length>1&&c.model.skuText)return lib.notification.simple("请选择 "+c.model.skuText,2e3),d.preventDefault();if(e=Number(a(".quantity-num-input .num-display").text()),e+=1,(null!=(i=c.skus[c.model.skuId])?i.quantity:void 0)&&e>Number(null!=(j=c.skus[c.model.skuId])?j.quantity:void 0))return lib.notification.simple("库存不足",2e3),d.preventDefault();for(a(".quantity-num-input .num-display").text(e),a("#order-form [name='quantity']").val(e),k=a(".installment .step-cost"),l=[],g=0,h=k.length;h>g;g++)f=k[g],l.push(f.innerText=(Number(f.dataset.preStepCost)*e).toFixed(2));return l}}(this)),l=this,m=c.detail.wrapper,l.defindConst(),i=l.skuProps,i&&1===i.length&&l.$props.each(function(a,b){var c;c=b.getAttribute("data-id"),l.ppathIdmap[c]||m.find(b).addClass("disabled")}),j=d.get("SkuView"),j.on("sku:left",function(){l.model.isDisplay||(l.propNames=b.map(l.propNames,b.sec),e.pageTransition({parent:"#J_detail_main",cur:"#J_detail_skum",obj:l,title:'<span class="dt-thide">'+l.propNames.join("、")+"</span>",ptitle:"商品详情"}),l.model.isDisplay=!0)}),j.on("sku:seckill",function(a){l.model.isDisplay&&(a&&(m.find("#J_detail_main").removeClass("none"),c.navigation.setTitle("商品详情"),c.navigation.setButton({type:"back",hide:!1,handler:function(){c.detail.goback()}})),m.find("#J_detail_skum").addClass("none"),l.model.isDisplay=!1)}),g=l.skuLap.html(),k=l.model.speType,j.on("change:stc",function(a,b){l.skuLap.html(a||g),l.skuSel.html(b||""),l.skuour.html(b||"请选择"+l.propNames.join("、"))}),j.on("change:btn",function(a){var b,c;c=l.skuMain.find(".dgsc-ft"),c.html(a),b=c.children()}),h=l.skuMain,l.$el.on("click",".dt-sku",function(a){location.hash="#sku"}),f="tap",lib.env.os.isIOS&&lib.env.taobaoApp&&(f="click"),l.skuMain.on(f,".dgscu-l img",function(a){var b;"TB"===(null!=(b=lib.env.aliapp)?b.appname:void 0)&&lib.env.os.isAndroid||e.fullscreenSlider([this.src])}),l.skuMain.on(f,".dgscp-c i",function(a){l.select(a)})},resetCascade:function(){this.skuMain.find(".forselect").each(function(b,c){a(c).find("select").eq(0).trigger("change")})},defindConst:function(){var a,b;b=c.detail.wrapper,a=this.skuMain=b.find("#J_detail_skum"),this.skuId=b.find("#sku-id"),this.skuSel=a.find(".dgscu-r .lgray"),this.skuLap=a.find("#J_detail_skupr"),this.$props=a.find(".dgsc-pr i"),this.skuour=this.$el.find(".dt-sku p"),this.simg=a.find(".dgscu-l img")[0]},showImg:function(a,b){var c;c=a.attr("data-img"),c&&(b||(c=this.data.v6.item.images[0]),this.simg.src=e.getWebpImg(c,this.bigImgSize))},select:function(b){var c,d,e;b.preventDefault(),e=this,c=a(b.target),c.hasClass("disabled")||(e.skuId.val(""),c.hasClass("sel")?(c.removeClass("sel"),d=!1):(c.addClass("sel"),c.siblings().removeClass("sel"),d=!0),e.showImg(c,d),e.resetCascade(),e.notice(),e.disable())},notice:function(){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;v=this,o=v.skuMain.find(".sel"),l=v.skuMain.find(".dgscp-c select"),m=v.skuMain.find(".forselect").length,h=o.length+m,n=m>0?b.size(this.cascadeSkuInfo.topSkuPVMap):0,c=this.skuProps.length,s=this.skuSel,r=this.skuLap,e=[],f=[],l.each(function(b,c){var d,g;g=a(c),d=g.find("option").eq(c.selectedIndex),e.push(d.attr("data-name")),f.push(d.text())}),o.each(function(b,c){var d;e.push(null!=(d=a(c).parent().prev().text())?d.replace(":",""):void 0),f.push(a(c).text())}),i=b.difference(this.propNames,e),this.model.skuId=null,0===h?this.model.skuText=this.propNames.join(","):h===c||h===n?(p="已选："+b.map(f,function(a){return'"'+a+'"'}).join(","),t=b.map(o,function(a){return a.getAttribute("data-id")}),n>0&&(b.map(l,function(b){var c,d;d=a(b),c=d.find("option").eq(b.selectedIndex),t.push(c.attr("data-id"))}),t=b.sortBy(t,function(a){return parseInt(a.split(":")[0])})),q=this.ppathIdmap[t.join(";")],u=this.skus[q]||{},u.add=b.sec(u.add),k='<ins class="orange">&yen;'+u.price.priceText+"</ins>"+(!this.isJu&&"(库存"+(u.quantity||0)+"件)"||""),g="&yen;"+u.price.priceText+(u.add?'<span class="font12">'+u.add+"</span>":""),j="&yen;"+u.price.priceText,this.skuId.val(q),this.model.skuId=q,this.updateInstallment(this.model.skuId)):(p='已选："'+f.join(",")+'" 还未选 <em class="gray">'+i.join(",")+"</em>",this.model.skuText=i.join(",")),d.get("SkuView").trigger("change:stc",k,p)},disable:function(){var c,d,e;e=this,c=this.skuMain.find(".sel"),1!==e.skuProps.length&&(e.$props.removeClass("disabled"),(0!==c.length||e.hasCascade)&&(d=a.map(a(".sel,.forselect"),function(a){return a.getAttribute("data-id")}),e.$props.each(function(){var c,f;f=a(this),f.hasClass("sel")?(c=f.parent().parent().siblings().find("i"),e.hasCascade&&(c=c.add(".forselect")),c.each(function(f,g){var h,i,j,k,l,m,n,o,p;m=a(g).parent().find(".sel").attr("data-id"),d=a.map(d,function(a){return a}),h=!1;for(k in e.ppathIdmap)if(k.indexOf(c.eq(f).attr("data-id"))>-1&&b.every(b.without(d,m),function(a){return k.indexOf(a)>-1})){for(i="",p=e.data.v6.skuBase.skus,n=0,o=p.length;o>n;n++)if(j=p[n],j.propPath===k){i=j.skuId;break}l=e.data.v6.skuCore.sku2info[i],l&&"0"!==l.quantity&&(h=!0)}h||c.eq(f).addClass("disabled")})):e.hasCascade&&e.skuMain.find(".forselect").each(function(b,c){var d,g,h,i;d=!1,h=a(c),i=f.attr("data-id");for(g in e.ppathIdmap)if(g.indexOf(i)>-1&&g.indexOf(h.attr("data-id"))>-1){d=!0;break}d||f.addClass("disabled")})})))},updateInstallment:function(b){var c,d,e,f,g;if(this.installment){for(a(".installment,.installment .container").show(),e=this.installment.period,a(".installment .container .wrap li").unbind("click"),a(".installment .container .wrap").html(""),delete this.installmentSlider,c="",f=0,g=e.length;g>f;f++)d=e[f],c+='<li data-step="'+d.stepNum+'">\n  <div  class="item">\n    <div  class="line1">分'+d.stepNum+"期("+d.poundage+')</div>\n    <div  class="line2">¥<span  data-pre-step-cost="'+d.purchasePrice+'"  class="step-cost">'+d.purchasePrice+"</span>/期</div> \n  </div>\n</li>";return a(".installment .container .wrap").html(c),a(".installment .container .wrap li").click(function(b){return function(b){var c,d,e,f;return b=a(b.currentTarget),b.hasClass("selected")?(b.removeClass("selected"),c=JSON.parse(a("#order-form [name='exParams']").val()),e=[!1,-1],c.installmentPay=e[0],c.installmentNum=e[1],a("#order-form [name='exParams']").val(JSON.stringify(c))):(a(".installment .container .wrap li").removeClass("selected"),b.addClass("selected"),d=b.attr("data-step"),c=JSON.parse(a("#order-form [name='exParams']").val()),f=[!0,d],c.installmentPay=f[0],c.installmentNum=f[1],a("#order-form [name='exParams']").val(JSON.stringify(c)))}}(this)),this.installmentSlider=new lib.Slider({container:".installment .container",margin:5,steps:123})}},destroy:function(){d.get("SkuView").off(),this.$el.off("click"),this.skuMain&&this.skuMain.off()}})}($,_,app)}.call(this),function(){!function(a,b){var c,d,e,f,g,h,i,j,k;k=b.detail.Utils,h=a.mtop,g=b.detail.message,d=a.uri.getUrl,c=a.Slider,f=a.login,j=a.notification,i=function(a){j.simple(a,2e3)},e=!1,b.extendView({name:"SliderView",el:"div.dt-slider",initialize:function(a){var b;a=a||{};for(b in a)this[b]=a[b];this.images=this.data.v6.item.images},template:function(b){var c,d,e,f,g,h,i;for(h=k.getCurWidth(),c=this.getSize(),d=[],i=this.images,g=i.length,d.push('<div class="dt-slider-cont" style="width:'+h+'px">'),d.push('<ul class="dt-slct-ul">'),e=0;g>e;)f=new a.img({size:c,isNeedWebp:!1,sharpen:"s150",q:["q50","q30"]}).getNewUrl(i[e]),d.push('<li style="width:'+h+'px">'),d.push('<img class="lazyimg" src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAB2GAAAdhgFdohOBAAAAAWJLR0QMgbNRYwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMS0wNFQxNDo0NTo1NiswODowMLKGfwEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTUtMTEtMDRUMTQ6NDU6NTYrMDg6MDDD28e9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1hJREFUeF7t3NtOI0cUQFFzh///T79yh+hMbAlZM3EnbbCytZZUos2LedgqHburudhut58biLjc/YQEQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJoUQZMiaFIETYqgSRE0KYImRdCkCJqUi+12+7m75ojn5+fd1c+6u7vbXXGMoBeYkF9eXjbv7++73/ysq6urze3trbAXMHIs8PHxsXl7e9t8fn6eZc17z9/AcYImRdCkmKEXeHx83Dw9Pe1e/e3m5mZzefk9+8Hvxoz7+/vNw8PD7hV/IugFDoO+uLj4Fdh3BT3m/b5+CBX0MkYOUgRNiqBJETQpgiZF0Ge2vxvIaQj6jOZruTknMl/RzVkRYa8n6DOamycT9dxAeX19dV7jBAR9Roc7sh16PUGfwOyyMzLM2p/KW+L6+vrXXccxR0RnsY6gV5qAZw6ekWHWfiae62NhT9BzS3vWnHXex81/J+iVJtrDcGcWnt164j72UMCcB5mdWcynIehvtP8WY8luzWkI+ptNyPvdesKeyPffbBwu0a8n6B+y/+A48/Wf1rHxhOMEfSb72ftwsY6gV5oPc6dcrOOJlQX+6YmVU+6sX6M+HEE8sbKMHXqlCXDCPsWyQ69nh17AQ7L/H4Je4HdB/zRBL2PkIEXQpBg5Fvh6l+8c5qzHzOz+WeNxgv4XJuxzEPJygibFDE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE2KoEkRNCmCJkXQpAiaFEGTImhSBE3IZvMXqxGr0N3ixFsAAAAASUVORK5CYII=" dataimg="'+_.sec(f)+'" />'),d.push("</li>"),e++;for(d.push('</ul><div class="dt-slider-mask"></div></div>'),d.push('<div class="dt-slider-status">'),e=0;g>e;)d.push("<i"),0===e&&d.push(' class="sel"'),d.push("></i>"),e++;return d.push("</div>"),d.push('<div id="inner-back">\n</div>\n<div id="inner-cart">\n</div>'),d.join("")},render:function(){this.el.innerHTML=this.template(this.data)},getSize:function(){var a;return a=this.picSize,a||(this.picSize=k.getPicSize(["320x320","640x640","480x480"]))},afterRender:function(){var a,f,h,j,l,m,n,o,p,q,r,s;q=function(){k.has3d?h.animate({rotate3d:"1, 0, 0, 90deg"},400,"ease",function(){h.hide(),j.css({"-webkit-transform":"rotate3d(1, 0, 0, -90deg)"}).show().animate({rotate3d:"1, 0, 0, 0"},400,"ease",function(){j.css("-webkit-transform","")})}):(h.hide(),j.show())},o=function(){r.favorite(function(){q()})},r=this,r.slide=new c(".dt-slider",{trigger:".dt-slider-status",lazyIndex:1,duration:300,callback:function(){k.sendPoint("sns.27.7")}}),a=r.$el.find("img"),l=[],p=!0,a.each(function(a,b){var c;c=r.images,l.push(k.getWebpImg(c[a],r.getSize(),"q90"))}),r.$el.find(".dt-slider-cont").on("tap",function(a){a&&a.preventDefault&&a.preventDefault()}),h=r.$el.find("li.dts-fav"),j=r.$el.find("li.dts-faved"),s=r.data._mmusdkwakeup,h.click(function(){var a,b;k.sendPoint("mtbdetail.1.2"),e?i(g.repeatMessage):(e=!0,s?(b=location.search.slice(1),a=["http://alimamasdk/itemCollect?"],a.push("itemId="+r.data._itemId),a.push("&type=1"),a.push("&"+b),a=a.join(""),window.WindVane.call("AlimamaWakeup","canWakeup",{url:a},function(a){$(document).on("Collect:Success",function(){q()}),$(document).on("Collect:Fail",function(){o()})},function(a){o()},1e4)):o())}),m=$("#inner-back"),m.click(function(){return history.back()}),f=b.getView("ActionView"),n=$("#inner-cart"),n.click(function(a){var b;return b=d({subdomain:"h5",path:"awp/base/bag.htm"}),b+="&spm=a1z3i.7c.top.dbag",location.href=b})},favorite:function(a,b){h.loginedRequest({api:"com.taobao.favorite.api.addCollect",v:"*",data:{itemId:this.model.id,type:1}},{succ:function(b){i(g.addFavSuccMsg),a&&a.call(null),e=!1},fail:function(b){var c,d;c=b.errcode,d=b.message,"timeout"===b?i(g.errorMessage):"ALREADY_COLLECT"===c?(d=g.addFavAgainMsg,i(d),a&&a.call(null)):"FAIL_SYS_SESSION_EXPIRED"===c?f.goLogin({rediUrl:location.href,hideType:!0}):i(d),e=!1}})},destroy:function(){this.slide&&this.slide.destroy(),this.$el.find(".dt-slider-cont").off("tap"),this.$el.find("li.dts-fav").off("click")}})}(lib,app)}.call(this),function(){!function(a,b,c,d){var e,f,g,h,i,j,k;h=c.mtop,f=d.detail,k=f.Utils,i=k.getParam(),g=f.message,j=c.config.sysType||"m",e=function(b){a.extend(this,b),this.curRq=0,this.data={}},a.extend(e.prototype,{fetch:function(b,c){var e,f,g,h,j,k,l,m,n,o,p,q,r,s;if(p=this,j=this.id,!j)return void a(".c-fs-loadiner").text("参数缺失");q=i.ttid,l=i.mmusdkwakeup,e=i.ali_refid,f=i.ali_trackid,r=i.u_channel||i.umpChannel,g=i.frm,h=i.hybrid,n=void 0,o=void 0;for(k in i)null!==k.match(/qfrom_\w+/g)&&(n=k,o=i[k]);s={},e&&(s.aliRefid=e),f&&(s.aliTrackid=f),r&&(s.umpChannel=r,p.data._ChannelKey=r),l&&(p.data._mmusdkwakeup=1===l),g&&(p.data._frmetao="etao"===g),h&&(p.data._hybrid="true"===h),q&&(p.data._ttid=decodeURIComponent(q)),n&&(p.data._qfromMore=[n,o]),p.data._itemId=j,m=d.requestMtop(j),m.then(function(c){var d,e,f,g;return p.data.v6=c,d={},(null!=(f=c.apiStack)?f.length:void 0)>0&&""!==c.apiStack[0].value&&(d=JSON.parse(c.apiStack[0].value),a.extend(!0,p.data.v6,d)),e=null!=(g=p.data.v6.trade)?g.redirectUrl:void 0,e&&-1===window.location.href.indexOf(e)?void location.replace(e):(p.adaptData(p.data),b?b.call(null,c):void 0)},function(b){return b.msg?a(".c-fs-loadiner").text(b.msg):void 0})},adaptData:function(a){var b,c,d;b=a.v6.item,b.images&&0!==b.images.length||(b.images=["//gw.alicdn.com/tps/i2/T1gtStFoVeXXbEBq2D-576-576.png"]),d=a.v6.seller,c=d.shopIcon,c?d.shopIcon=k.getWebpImg(c,null,"q90"):d.shopIcon="//wwc.alicdn.com/avatar/get_avatar.do?userId="+d.userId+"&width=80&height=80&type=sns"}}),d.detail.model=e}($,_,lib,app)}.call(this),function(){!function(a,b,c){var d,e,f;return e=function(){return new window.XMLHttpRequest}(),f=/^\s*$/,c.requestJson=function(a){var b,c,d;return(d=a.url)?(c=a.success,b=a.error,e.onreadystatechange=function(){var d,g,h,i;if(4===e.readyState)if(i=e.status,h=void 0,g=void 0,i>=200&&300>i||304===i){h=e.responseText;try{h=f.test(h)?null:JSON.parse(h)}catch(j){d=j,g=d}g?b.call(a.context,g,"parsererror"):c.call(a.context,h)}else b.call(a.context,e.statusText,i?"error":"abort")},e.open("get",d,!0),e.withCredentials=!0,e.setRequestHeader("Accept","application/json"),e.send(null)):void 0},d=function(a){var b,c;return c="&back="+encodeURIComponent(window.location)+"&",b=a.replace(/http_referer[^&]+$/,c).replace(/http_referer.+?&/,c).replace("&&","&"),window.location.replace(b)},c.requestMtop=function(a){var e,f,g,h;return h=c.detail.Utils.getParam()||{},f=JSON.stringify(h),e={api:"mtop.taobao.detail.getdetail",v:"6.0",ttid:"2013@taobao_h5_1.0.0",data:{itemNumId:""+a,exParams:""+f}},g=new Promise(function(c,f){var g;return g=b.mtop.request(e),g.then(function(e){var g,h,i,j,k,l;return"ERRCODE_QUERY_DETAIL_FAIL::checkcode"===(null!=(j=e.ret)?j[0]:void 0)&&(null!=(k=e.data)?k.redirectUrl:void 0)?(g=result.data.redirectUrl,
d(g),h=new Error("安全校验(mtop.taobao.detail.getdetail)"),h.msg="需要安全校验",f(h)):0===(null!=(l=e.ret)?l[0].indexOf("ITEM_FORBID"):void 0)?(i=location.search.slice(1),i+="&itemId=",i+=a,location.replace("//m.taobao.com/go/act/mobile/cloud-jump.html?frm=detail&"+i),f(new Error("ITEM_FORBID(mtop.taobao.detail.getdetail)"))):e.retType===b.mtop.RESPONSE_TYPE.SUCCESS?c(e.data):(h=new Error("接口错误(mtop.taobao.detail.getdetail)"),h.msg="接口错误",f(h))})["catch"](function(a){return a.msg="网络错误",f(a)})})}}($,lib,app)}.call(this),function(a,b){var c=a.taoplus;b.detail.Utils;b.detail.DetailController=function(a){this.initialize=function(a){a=a||{};for(var b in a)this[b]=a[b];var d=this.data=this.model.data;this.viewNames=["SliderView","BannerView","ItemInfoView","ItemExtendView","SkuView","LBSView","ActionView","SellerView","CommonView","FooterView"];var e=!0;this.model.logic_removeHF&&(this.viewNames=_.without(this.viewNames,"FooterView"),e=!1),this.model.isIpad&&(this.viewNames=_.without(this.viewNames,"SliderView","SellerView","CommonView","FooterView"),e=!1),e&&c&&c.initialize(),"true"!==d.v6.feature.hasSku&&(this.viewNames=_.without(this.viewNames,"SkuView")),this.viewInstances=[],this.viewMap={}},this.initialize(a),this.render=function(){var a=this,b=document.createDocumentFragment();return a.viewNames.forEach(function(c){var d=a.getDynView(c);if(d){var e=d;b.appendChild(e.el),e.render(),a.viewInstances.push(e),a.viewMap[c]=e}}),b},this.getDynView=function(a){var c,d=this,e=this.extensionName;if(e&&e.length>0){for(var f=e.length,g=0;f>g&&!(c=b.getView(e[g]+"_"+a,{model:d.model,data:d.data}));g++);if(c)return c}return b.getView(a,{model:d.model,data:d.data,id:d.id,isMoving:d.isMoving})},this.afterRender=function(){try{var a=this.data.v6.item.title,b=this.data.v6.item.images[0];$("head").append('<meta name="Alipay:title" content="'+_.sec(a)+'"/>'),$("head").append('<meta name="Alipay:imgUrl" content="'+_.sec(b)+'"/>'),$("head").append('<meta name="Alipay:desc" content="'+_.sec(a)+'"/>')}catch(c){console.info("alipay meta set error")}this.viewInstances.forEach(function(a){a.afterRender&&a.afterRender()})},this.destroy=function(){for(var a,b=0,c=this.viewInstances.length;c>b;b++)a=this.viewInstances[b],a&&a.destroy&&a.destroy();this.viewInstances=this.viewMap=null}}}(lib,app),function(){!function(a,b,c){var d,e,f,g,h,i,j,k,l,m;j=window.sessionStorage,m=c.detail.Utils,h=b.notification,k=function(a){h.simple(a,2e3)},l=b.uri,f=b.storage.cookie,e=c.detail.model,d=c.detail.DetailController,i=m.getParam(),g=c.module.MessageScope,c.extendView({name:"detail_view",el:"div#J_detail",initialize:function(){var b;b=a(c.config.enableContent.instance.getActive()),c.detail.wrapper=b},ttidLogic:function(){var a,b,d,e,f,g;e=i.ttid,e=e?decodeURIComponent(e):e,g=navigator.userAgent,f=/.+@.+/,b=null!=g.match(/WindVane/),a=null!=g.match(/AlipayClient/i),d=!1,(e&&null!=e.match(f)||b||a)&&(this.logic_removeHF=!0,c.navigation.setButton({type:"back",hide:!0})),e&&(e.indexOf("@taobao_ipad")>-1||e.indexOf("@whttk_android")>-1||e.indexOf("@whttk_iphone")>-1||e.indexOf("@tbdailydeals")>-1)&&(this.isIpad=!0,(e.indexOf("@tbdailydeals_android_1.0.0")>-1||e.indexOf("@tbdailydeals_iphone_1.0.0")>-1||e.indexOf("@tbdailydeals_iphone_1.0.2")>-1)&&(this.isIpad=!1))},tbk:function(){var a,b;a=this.detailModel,b=a.speType,c.loadResource(""+location.protocol+"//assets.alicdn.com/cps/trace.js",function(){try{CPS.trace({type:2,subtype:b.tmall?2:6,itemid:a.id,sellerid:a.data.seller.userNumId})}catch(c){}})},render:function(){var d,f,g,h,j;a("header.navbar").hide(),this.ttidLogic(),this.logic_removeHF&&a(".viewport").addClass("enablebyself"),c.detail.goback=function(){c.navigation.setButton({type:"back",hide:!1,handler:function(){history.back()}})},f=a(".c-fs-loading"),f.length?f.removeClass("none"):(f=a('<div class="c-fs-loading"><span class="c-fs-loadiner">正在加载</span></div>'),f.appendTo(document.body)),j=this,g=c.navigation.getParameter("id"),g||(g=i.id),j.itemId=g,d=this.detailModel=new e({id:g,logic_removeHF:j.logic_removeHF,isIpad:j.isIpad}),h=b.config&&b.config.sysType?b.config.sysType:"m",d.fetch(function(){var a,b;b=function(){j._renderContent()},a=j.detailModel.extensionResource,a&&a.length?c.loadResource(a,b):j._renderContent(),f.addClass("none")},function(a){j.$el.html(a),f.addClass("none")})},_renderContent:function(b){var e,f,h,i,k,l,n,o,p,q,r,s;p=function(b){var d,e,f,g,h,i;h=a(b.parent),g=a(b.cur),i=j?j.getItem("h5cdetailtransition"):window.pageYOffset,f=m.has3d(),d=f?"translate3d(":"translate(",e=f?",0)":")",g.css({position:"absolute",top:0,left:0,width:"100%",height:window.innerHeight,"z-index":11,"-webkit-transform":d+"0,0"+e}),h.removeClass("none"),g.animate({translateX:"100%"},300,"ease-out",function(){window.scrollTo(0,i),g.addClass("none").attr("style","")}),c.navigation.setTitle(b.ptitle)},l=this.detailModel,i=l.data,this.tbk(),h=location.hash.slice(1),n=void 0,("sku"===h||"services"===h||"fulldesc"===h)&&(n=!0),k=this.detailController=new d({id:this.itemId,model:l,$el:this.$el,isMoving:n,extensionName:l.extension}),r=c.detail.wrapper,o=r.find("#J_detail_main"),o=o.length||a('<div id="J_detail_main"></div>'),o.append(k.render()),o.append('<div id="action-bar-padding"></div>'),n&&o.addClass("none"),this.$el.append(o),f=r.find("#J_detail_skum"),e=r.find("#J_detail_services"),f.appendTo(o.parent()),e.appendTo(o.parent()),"sku"===h?f.removeClass("none"):"services"===h?(e.removeClass("none"),q=c.getView("ServiceView"),q&&(q.isFirst=null,r.find("#J_detail_services").find("img").each(function(a,b){var c;c=b.getAttribute("realsrc"),c&&(b.src=c,b.removeAttribute("realsrc"))})),c.navigation.setTitle('<span class="dt-thide">更多服务、优惠、活动信息</span>')):"fulldesc"===h&&c.navigation.setTitle("图文完整版"),k.afterRender(),a(window).on("hashchange",function(b){var c,d;d=location.hash.slice(1),"services"===d?(g.get("ServiceView").trigger("op:ani"),h="services"):"sku"===d?(g.get("SkuView").trigger("sku:left"),h="sku"):"fulldesc"===d?(g.get("ImageTxtView").trigger("itv:left"),h="fulldesc"):(c=void 0,"sku"===h?(c="#J_detail_skum",l.isDisplay=null):"services"===h?c="#J_detail_services":"fulldesc"===h&&(c="#J_image_shuf"),c&&p({parent:"#J_detail_main",cur:c,ptitle:"商品详情"}),h=d),"sku"===h?a("header.navbar").show():a("header.navbar").hide()}),s=i._mmusdkwakeup,s||c.detail.smartBannerHelper.active()},teardown:function(){this.detailController&&this.detailController.destroy(),this.detailController=null,c.detail.Utils.loading=null,c.detail.wrapper=null,this.$el.children().remove()}})}($,lib,app)}.call(this),function(a,b){var c=a&&a.config&&a.config.sysType?a.config.sysType:"m",d="m"==c?"g.alicdn.com":"g-assets.daily.taobao.net",e="0.10.11";location.protocol,b.config.itemExtension={jhs:{src:[location.protocol+"//"+d+"/mtb/app-detail/"+e+"/detail_jhs.js"]},seckill:{src:[location.protocol+"//"+d+"/mtb/app-detail/"+e+"/detail_seckill.js"]},ticket1:{src:[location.protocol+"//"+d+"/mtb/app-detail/"+e+"/js/detail_ticket_min.js"]},travel:{src:[location.protocol+"//"+d+"/trip/h5-taobao-skin/"+e+"/detail/index-min.css"]}},b.definePage({name:"detail",title:"宝贝详情",buttons:[{type:"back",text:"<span>返回</span>",autoHide:!1,"class":"c-btn c-btn-aw",handler:function(){history.back()}}],startup:function(){var a=this.view=b.getView("detail_view");this.$el.append(a.$el),a.render()},teardown:function(){this.view&&this.view.teardown&&this.view.teardown()}})}(lib,app);